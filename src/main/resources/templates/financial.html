<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financeiro</title>
    <link rel="icon" th:href="@{/images/image-favicon.jpg}" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/financial.css}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header class="header">
        <div class="container">
            <h1 class="logo">Interactive Edge</h1>
            <nav class="nav">
                <a th:href="@{/}" class="nav-link"><i class="fas fa-home"></i> Dashboard</a>
                <a th:href="@{/guest}" class="nav-link"><i class="fas fa-users"></i> H√≥spedes</a>
                <a th:href="@{/room}" class="nav-link"><i class="fas fa-bed"></i> Quartos</a>
                <a href="/calendario" class="btn-calendar">
                    <i class="fas fa-calendar"></i> Calend√°rio
                </a>
                <div class="dropdown">
                    <a class="nav-link dropdown-link"><i class="fas fa-cog"></i> Gerenciar</a>
                    <div class="dropdown-content">
                        <a th:href="@{/reserve}"><i class="fas fa-calendar-check"></i> Reservas</a>
                        <a th:href="@{/funcionarios}"><i class="fas fa-user-tie"></i> Funcion√°rios</a>
                    </div>
                </div>
                <div class="user-info" id="userInfo"></div>
                <a href="#" class="nav-link" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Sair</a>
            </nav>
        </div>
    </header>
    <main class="main">
        <div class="container">
            <div id="alertSuccess" class="alert alert-success"></div>
            <div id="alertError" class="alert alert-error"></div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Dashboard Financeiro</h2>
                    <div class="process-buttons">
                        <button class="btn btn-primary btn-sm" id="processAllBtn">
                            üîÑ Processar Todas as Reservas
                        </button>
                        <button class="btn btn-info btn-sm" id="processAdvancedBtn">
                            ‚öôÔ∏è Op√ß√µes Avan√ßadas
                        </button>
                        <button class="btn btn-success btn-sm" id="refreshDataBtn">
                            üìä Atualizar Dados
                        </button>
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-4">
                        <div class="stats-card daily">
                            <div class="stats-number" id="dailyRevenue">R$ 0,00</div>
                            <div class="stats-label">Receita Hoje</div>
                            <div class="stats-subtitle" id="dailyReservations">0 reservas</div>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="stats-card monthly">
                            <div class="stats-number" id="monthlyRevenue">R$ 0,00</div>
                            <div class="stats-label">Receita Este M√™s</div>
                            <div class="stats-subtitle" id="monthlyReservations">0 reservas</div>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="stats-card annual">
                            <div class="stats-number" id="annualRevenue">R$ 0,00</div>
                            <div class="stats-label">Receita Este Ano</div>
                            <div class="stats-subtitle" id="annualReservations">0 reservas</div>
                        </div>
                    </div>
                </div>
                
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-value" id="occupancyRate">0%</div>
                        <div class="metric-label">Taxa de Ocupa√ß√£o</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="averageDailyRate">R$ 0,00</div>
                        <div class="metric-label">ADR (Di√°ria M√©dia)</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="revPAR">R$ 0,00</div>
                        <div class="metric-label">RevPAR</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="totalNights">0</div>
                        <div class="metric-label">Total de Noites</div>
                    </div>
                </div>
            </div>
            
            <div class="tabs">
                <div class="tab active" data-tab="daily">Di√°rio</div>
                <div class="tab" data-tab="monthly">Mensal</div>
                <div class="tab" data-tab="annual">Anual</div>
                <div class="tab" data-tab="reports">Relat√≥rios</div>
            </div>
            
            <div id="tab-daily" class="tab-content active">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Registros Di√°rios</h3>
                        <div class="filter-group">
                            <input type="month" id="dailyMonthFilter" class="form-control" style="width: 200px;">
                            <button class="btn btn-info btn-sm" id="filterDailyBtn">
                                Filtrar
                            </button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="dailyChart"></canvas>
                    </div>
                    <div id="dailyRecords">
                        <p>Carregando registros di√°rios...</p>
                    </div>
                </div>
            </div>
            
            <div id="tab-monthly" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Registros Mensais</h3>
                        <div class="filter-group">
                            <select id="yearFilter" class="form-control" style="width: 150px;"></select>
                            <button class="btn btn-info btn-sm" id="filterMonthlyBtn">
                                Filtrar
                            </button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="monthlyChart"></canvas>
                    </div>
                    <div id="monthlyRecords">
                        <p>Carregando registros mensais...</p>
                    </div>
                </div>
            </div>
            
            <div id="tab-annual" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Registros Anuais</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="annualChart"></canvas>
                    </div>
                    <div id="annualRecords">
                        <p>Carregando registros anuais...</p>
                    </div>
                </div>
            </div>
            
            <div id="tab-reports" class="tab-content">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Relat√≥rios Detalhados</h3>
                        <div class="filter-group">
                            <input type="month" id="reportMonth" class="form-control" style="width: 200px;">
                            <button class="btn btn-primary btn-sm" id="generateReportBtn">
                                Gerar Relat√≥rio
                            </button>
                        </div>
                    </div>
                    <div id="reportContent">
                        <p>Selecione um m√™s e clique em "Gerar Relat√≥rio" para visualizar os dados.</p>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Receita por Tipo de Quarto</h3>
                    </div>
                    <div class="chart-container">
                        <canvas id="roomTypeChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <footer class="footer">
        <div class="container">
            <p><strong>&copy;Interactive Edge System</strong></p>
        </div>
    </footer>
    
    <script th:src="@{/js/financial.js}" defer></script>
</body>
</html>